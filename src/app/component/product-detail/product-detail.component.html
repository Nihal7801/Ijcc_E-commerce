<div class="product-page" *ngIf="product">
  <!-- Left: Product Images -->
  <div class="product-gallery">
    <!-- Thumbnails -->
    <div class="thumbnails">
      <img *ngFor="let img of product.images" 
           [src]="img" 
           [alt]="product.title" 
           (click)="changeImage(img)"
           [class.active]="img === selectedImage">
    </div>
    <!-- Main Image -->
    <div class="main-image">
      <img [src]="selectedImage" [alt]="product.title">
    </div>
  </div>

  <!-- Right: Product Info -->
  <div class="product-info">
    <h1 class="title">{{ product.title }}</h1>
    <p class="brand">Brand: <span>{{ product.brand }}</span></p>

    <div class="rating">
      {{ '⭐'.repeat(product.rating) }}☆ 
      <span>({{ product.reviews }} Reviews)</span>
    </div>

    <div class="price-box">
      <span class="current">₹{{ discountedPrice }}</span>
      <span class="original">₹{{ product.price.old }}</span>
      <span class="discount">({{ product.price.discount }} OFF)</span>
    </div>

    <p class="description">{{ product.description }}</p>

    <!-- Colors -->
    <div class="options" *ngIf="product.colors?.length">
      <label>Colors:</label>
      <div class="colors">
        <img *ngFor="let c of product.colors" 
             [src]="c.image" 
             [alt]="c.name"
             (click)="selectColor(c)"
             [class.active]="selectedColor?.name === c.name">
      </div>
    </div>

    <!-- Sizes -->
    <div class="options">
      <label for="size">Size:</label>

      <!-- Agar multiple sizes array hai -->
      <select *ngIf="product.sizes?.length > 0; else singleOrNA"
              id="size"
              [(ngModel)]="selectedSize">
        <option *ngFor="let s of product.sizes" [value]="s">{{ s }}</option>
      </select>

      <!-- Agar sirf ek size string hai -->
      <ng-template #singleOrNA>
        <span *ngIf="product.size; else noSize">
          {{ product.size }}
        </span>
        <ng-template #noSize>
          <span>Not available</span>
        </ng-template>
      </ng-template>
    </div>

    <!-- Weight -->
    <div class="options">
      <label>Weight:</label>
      <span *ngIf="product.weight; else noWeight">{{ product.weight }} g</span>
      <ng-template #noWeight>
        <span>Not available</span>
      </ng-template>
    </div>

    <!-- Delivery -->
    <div class="delivery">
      <h3>Delivery</h3>
      <p>Get it by <strong>{{ deliveryDate }}</strong></p>
      <p class="delivery-location">
        Delivering to: <span>{{ product.delivery.location }}</span>
      </p>
      <p><strong>SKU Code: {{ product.SKU_ECC }}</strong></p>
    </div>

    <!-- Buttons -->
    <div class="buttons">
      <button class="btn buy">Buy Now</button>
      <button class="btn cart" (click)="addToCart()">Add to Cart</button>
    </div>

    <!-- Product Details -->
    <div class="details">
      <h3>Product Details</h3>
      <ul>
        <li><strong>Brand:</strong> {{ product.brand }}</li>
        <li><strong>Size:</strong> {{ product.size || selectedSize || 'Not available' }}</li>
        <li><strong>Weight:</strong> {{ product.weight || 'Not available' }}</li>
        <li><strong>SKU:</strong> {{ product.SKU_ECC }}</li>
        <li><strong>Delivery Location:</strong> {{ product.delivery.location }}</li>
      </ul>
    </div>
  </div>
</div>

<h1>View some similar products</h1>

<!-- Agar Uneako product hai -->
<app-prodct-uneako *ngIf="isUneako" [excludeId]="product.id"></app-prodct-uneako>

<!-- Agar normal product hai -->
<app-product *ngIf="!isUneako" [excludeId]="product.id"></app-product>

<app-footer></app-footer>
